@{
    ViewData["Title"] = "OrderDetail";
    Layout = "_Layout_OrderManagement";
}
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>範例頁面</title>
    <link rel="stylesheet" href="/Ting/css/OrderManagement.css">
</head>
<body>
    <br />
    <br />
    <br />
    <br />
    <div class="container">
        <div class="content-wrapper">
            <div class="sidebar">
                <ul>
                    <li>
                        <a href="#" alt="管理訂單">
                            <div class="icon"><i class="fa-solid fa-calendar-days"></i></div>
                            <div class="text"><span>管理訂單</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="訂單詳情">
                            <div class="icon"><i class="fa-solid fa-briefcase"></i></div>
                            <div class="text"><span>訂單詳情</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="住宿">
                            <div class="icon"><i class="fa-solid fa-building"></i></div>
                            <div class="text"><span>住宿</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="機票">
                            <div class="icon"><i class="fa-solid fa-plane"></i></div>
                            <div class="text"><span>機票</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="活動體驗">
                            <div class="icon"><i class="fa-solid fa-person-skiing-nordic"></i></div>
                            <div class="text"><span>活動體驗</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="住宿訊息">
                            <div class="icon"><i class="fa-solid fa-comment-dots"></i></div>
                            <div class="text"><span>住宿訊息</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="住宿評鑑">
                            <div class="icon"><i class="fa-solid fa-star"></i></div>
                            <div class="text"><span>住宿評鑑</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="AgodaVIP">
                            <div class="icon"><i class="fa-solid fa-crown"></i></div>
                            <div class="text"><span>Agoda客服</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="A金回饋">
                            <div class="icon"><i class="fa-solid fa-money-check-dollar"></i></div>
                            <div class="text"><span>A金回饋</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="現金回饋">
                            <div class="icon"><i class="fa-solid fa-sack-dollar"></i></div>
                            <div class="text"><span>現金回饋</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="PointsMAX">
                            <div class="icon"><i class="fa-solid fa-piggy-bank"></i></div>
                            <div class="text"><span>PointsMAX</span></div>
                        </a>
                    </li>
                    <li>
                        <a href="#" alt="個人資料">
                            <div class="icon"><i class="fa-solid fa-user"></i></div>
                            <div class="text"><span>個人資料</span></div>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="content">
                <div class="order-confirmation-card" id="order-confirmation-card">
                    <!-- 訂單確認卡片內容 -->
                </div>
                <div class="hotel-info" id="hotel-info">
                    <!-- 飯店資訊 -->
                </div>
                <div class="stay-info" id="stay-info">
                    <!-- 入住資訊 -->
                </div>
                <div class="room-info" id="room-info">
                    <!-- 房間資訊 -->
                </div>
                <div class="guest-info" id="guest-info">
                    <!-- 旅客資訊 -->
                </div>
                <div class="price-info" id="price-info">
                    <!-- 價格資訊 -->
                </div>
            </div>
        </div>
    </div>
    <script src="https://kit.fontawesome.com/091893cea4.js" crossorigin="anonymous"></script>
    <script defer>
        document.addEventListener('DOMContentLoaded', () => {
            const orderId = new URLSearchParams(window.location.search).get('orderId');

            if (orderId) {
                fetchOrderDetails(orderId);
            }

            function fetchOrderDetails(orderId) {
                fetch(`https://localhost:7103/api/Orders/${orderId}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data) {
                            populateOrderDetails(data);
                        } else {
                            console.error('未找到訂單數據');
                        }
                    })
                    .catch(error => console.error('獲取訂單數據失敗:', error));
            }

            function populateOrderDetails(data) {
                document.getElementById('order-confirmation-card').innerHTML = `
                            <h2>已確認</h2>
                            <p>訂單編號: ${data.orderId}</p>
                            <p>PIN碼: ${data.pin}</p>
                            <!-- 其他訂單確認信息 -->
                        `;

                const hotelInfoHTML = data.orderDetails.map(detail => `
                            <div>
                                <h3>${detail.hotelName}</h3>
                                <p>${detail.hotelAddress}</p>
                                <p>電話: ${detail.hotelPhone}</p>
                                <!-- 其他飯店信息 -->
                            </div>
                        `).join('');
                document.getElementById('hotel-info').innerHTML = hotelInfoHTML;

                const stayInfoHTML = data.orderDetails.map(detail => `
                            <div>
                                <p>入住: ${new Date(detail.checkInDate).toLocaleDateString()}</p>
                                <p>退房: ${new Date(detail.checkOutDate).toLocaleDateString()}</p>
                                <!-- 其他入住信息 -->
                            </div>
                        `).join('');
                document.getElementById('stay-info').innerHTML = stayInfoHTML;

                const roomInfoHTML = data.orderDetails.map(detail => `
                            <div>
                                <p>房型: ${detail.roomType}</p>
                                <p>床型: ${detail.bedType}</p>
                                <p>房間數量: ${detail.roomCount}</p>
                                <!-- 其他房間信息 -->
                            </div>
                        `).join('');
                document.getElementById('room-info').innerHTML = roomInfoHTML;

                const guestInfoHTML = `
                            <div>
                                <p>姓名: ${data.guestName}</p>
                                <p>聯絡電話: ${data.guestPhone}</p>
                                <p>電子郵件: ${data.guestEmail}</p>
                                <!-- 其他旅客信息 -->
                            </div>
                        `;
                document.getElementById('guest-info').innerHTML = guestInfoHTML;

                document.getElementById('price-info').innerHTML = `
                            <div>
                                <p>總價: NT$${data.totalPrice}</p>
                                <!-- 其他價格信息 -->
                            </div>
                        `;
            }
        });
    </script>
</body>
</html>
